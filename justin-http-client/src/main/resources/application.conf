include "replication.conf"

http {
  interface = ${INTERFACE}
  port      = ${PORT}
}

node {
  id = ${NODE_ID} // should be unique in cluster
}

ring {
  creation-size      = 64
  cluster-nodes-size = 5
}

akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  loglevel = DEBUG
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  logging-filter = "akka.event.slf4j.Slf4jLoggingFilter"

  actor {
    provider = cluster
  }

  remote {
    log-remote-lifecycle-events = off
    log-sent-messages = off
    log-received-messages = off

    netty.tcp {
      # in production should be replaced with PUBLIC ip/hostname
      hostname = ${HOST_INTERNAL_IP}
      port = 2551
      # Temporary, only for running real cluster locally with Docker
      port = ${?SERVICE_AKKA_PORT}

      bind-hostname = ${HOST_INTERNAL_IP}
      bind-port = 2551
      # Temporary, only for running real cluster locally with Docker
      bind-port = ${?SERVICE_AKKA_PORT}
    }
  }

  cluster {
    seed-nodes = [
      "akka.tcp://justin-db-cluster-system@127.0.0.1:2551",
      "akka.tcp://justin-db-cluster-system@127.0.0.1:2552"
    ]

    # Disable legacy metrics in akka-cluster.
    metrics.enabled=off
  }
}

consul {
  enabled = true
  host = 127.0.0.1
  host = ${?CONSUL_HOST}
}